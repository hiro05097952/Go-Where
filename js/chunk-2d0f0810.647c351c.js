(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0f0810"],{"9d3b":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-5 row justify-content-center",attrs:{id:"checkorder"}},[a("form",{staticClass:"col-md-6"},[a("table",{staticClass:"table"},[t._m(0),a("tbody",t._l(t.order.products,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"align-middle"},[t._v(t._s(e.title))]),a("td",{staticClass:"align-middle"},[t._v(t._s(e.qty)+"/"+t._s(e.unit||"個"))]),a("td",{staticClass:"align-middle text-right"},[t._v(t._s(e.price))])])})),0),a("tfoot",[a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"2"}},[t._v("總計")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.order.total))])])])]),a("table",{staticClass:"table"},[a("tbody",[a("tr",[a("th",{attrs:{width:"100"}},[t._v("Email")]),a("td",[t._v(t._s(t.order.user.email))])]),a("tr",[a("th",[t._v("姓名")]),a("td",[t._v(t._s(t.order.user.name))])]),a("tr",[a("th",[t._v("收件人電話")]),a("td",[t._v(t._s(t.order.user.tel))])]),a("tr",[a("th",[t._v("收件人地址")]),a("td",[t._v(t._s(t.order.user.address))])]),a("tr",[a("th",[t._v("付款狀態")]),a("td",[t.order.is_paid?a("span",{staticClass:"text-success"},[t._v("付款完成")]):a("span",[t._v("尚未付款")])])])])]),!1===t.order.is_paid?a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-danger",on:{click:function(e){return e.preventDefault(),t.toPay(e)}}},[t._v("確認付款去")])]):t._e(),a("div",{ref:"ecpay",attrs:{sytle:"display: none;"}})])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th",[t._v("品名")]),a("th",[t._v("數量")]),a("th",[t._v("單價")])])}],o=(a("ac6a"),{name:"checkOrder",data:function(){return{order:{products:{},user:{}},ecpay:{}}},created:function(){this.getOrder()},methods:{getOrder:function(){var t=this,e="".concat("https://go-where-shop.herokuapp.com","/api/order/").concat(this.$route.params.order_id);this.$store.commit("LOADINGCHANGE",!0),this.axios.get(e).then((function(e){t.$store.commit("LOADINGCHANGE",!1),t.order=e.data.order,t.order.is_paid&&t.getClientReturn()}))},toPay:function(){var t=this,e=new Date,a=e.getMonth()+1;a=a<10?"0".concat(a):a;var r=e.getDate();r=r<10?"0".concat(r):r;var s=e.getHours();s=s<10?"0".concat(s):s;var o=e.getMinutes();o=o<10?"0".concat(o):o;var c=e.getSeconds();c=c<10?"0".concat(c):c;var n="".concat(e.getFullYear(),"/").concat(a,"/").concat(r," ").concat(s,":").concat(o,":").concat(c),i="";this.order.products.forEach((function(t,e,a){e!==a.length-1?i+="".concat(t.title,"#"):i+=t.title}));var d={MerchantTradeDate:n,TotalAmount:this.order.total,ItemName:i,TradeDesc:"GoWhere"};this.axios.post("".concat("https://go-where-shop.herokuapp.com","/api/ecpay/checkout"),{orderID:this.order.id,config:d}).then((function(e){t.$refs.ecpay.innerHTML=e.data,document.querySelector("#_form_aiochk").submit()}))},getClientReturn:function(){var t=this,e="".concat("https://go-where-shop.herokuapp.com","/api/ecpay/client");this.axios.get(e).then((function(e){console.log("ecpay: ",e.data),t.ecpay=e.data}))}}}),c=o,n=a("2877"),i=Object(n["a"])(c,r,s,!1,null,null,null);e["default"]=i.exports}}]);
//# sourceMappingURL=chunk-2d0f0810.647c351c.js.map