(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21ef69"],{d898:function(e,s,r){"use strict";r.r(s);var a=function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("div",{attrs:{id:"accountInfo"}},[r("ul",[r("li",[r("label",{attrs:{for:"displayName"}},[e._v("姓名")]),r("div",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.displayName,expression:"userInfo.displayName"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{type:"text",id:"displayName",name:"name","data-vv-as":"姓名"},domProps:{value:e.userInfo.displayName},on:{input:function(s){s.target.composing||e.$set(e.userInfo,"displayName",s.target.value)}}}),r("span",[e._v(e._s(e.errors.first("name")))])])]),r("li",[r("label",{attrs:{for:"email"}},[e._v("帳號")]),r("input",{attrs:{type:"text",id:"email",disabled:""},domProps:{value:e.userInfo.email}})]),r("li",{staticClass:"emailVerified"},[r("h3",[e._v("信箱驗證")]),r("p",{class:{"text-success":e.storeUser.emailVerified,"text-danger":!e.storeUser.emailVerified}},[e._v("\n        "+e._s(e.storeUser.emailVerified?"通過驗證":"尚未驗證")+"\n      ")]),e.storeUser.emailVerified?e._e():r("button",{staticClass:"btn btn-outline-primary btn-sm",attrs:{disabled:e.emailBtnDisable},on:{click:function(s){return s.preventDefault(),e.sendEmailVerificationAgain(s)}}},[e._v("\n        "+e._s(e.emailBtnDisable?"重新驗證 "+e.btnTime:"重新驗證")+"\n      ")])]),r("li",{class:{passwordEditing:e.isEditing.password}},[r("label",[e._v("密碼")]),e.isEditing.password?r("div",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.password.currentPassword,expression:"password.currentPassword"},{name:"validate",rawName:"v-validate",value:"min:12|max:16|required",expression:"'min:12|max:16|required'"}],attrs:{type:"password",placeholder:"請輸入目前密碼",name:"password","data-vv-as":"密碼"},domProps:{value:e.password.currentPassword},on:{input:function(s){s.target.composing||e.$set(e.password,"currentPassword",s.target.value)}}}),r("span",[e._v(e._s(e.errors.first("password")))]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password.newPassword,expression:"password.newPassword"},{name:"validate",rawName:"v-validate",value:"min:12|max:16|required",expression:"'min:12|max:16|required'"}],ref:"newPassword",attrs:{type:"password",placeholder:"請輸入新密碼",name:"newPassword","data-vv-as":"新密碼"},domProps:{value:e.password.newPassword},on:{input:function(s){s.target.composing||e.$set(e.password,"newPassword",s.target.value)}}}),r("span",[e._v(e._s(e.errors.first("newPassword")))]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password.newPasswordConfirm,expression:"password.newPasswordConfirm"},{name:"validate",rawName:"v-validate",value:"confirmed:newPassword|required",expression:"'confirmed:newPassword|required'"}],attrs:{type:"password",placeholder:"密碼確認",name:"newPasswordConfirm","data-vv-as":"密碼確認"},domProps:{value:e.password.newPasswordConfirm},on:{input:function(s){s.target.composing||e.$set(e.password,"newPasswordConfirm",s.target.value)}}}),r("span",[e._v(e._s(e.errors.first("newPasswordConfirm")))])]):r("a",{attrs:{href:"#"},on:{click:function(s){s.preventDefault(),e.isEditing.password=!0}}},[e._v("重新設定密碼")])]),r("li",[r("label",{attrs:{for:"address"}},[e._v("地址")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.address,expression:"userInfo.address"}],attrs:{type:"text",id:"address"},domProps:{value:e.userInfo.address},on:{input:function(s){s.target.composing||e.$set(e.userInfo,"address",s.target.value)}}})]),r("li",{staticClass:"subscribe"},[r("h3",[e._v("訂閱")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.subscribe,expression:"userInfo.subscribe"}],attrs:{type:"checkbox",name:"subscribe",id:"subscribe","true-value":1,"false-value":0},domProps:{checked:Array.isArray(e.userInfo.subscribe)?e._i(e.userInfo.subscribe,null)>-1:e._q(e.userInfo.subscribe,1)},on:{change:function(s){var r=e.userInfo.subscribe,a=s.target,t=a.checked?1:0;if(Array.isArray(r)){var i=null,n=e._i(r,i);a.checked?n<0&&e.$set(e.userInfo,"subscribe",r.concat([i])):n>-1&&e.$set(e.userInfo,"subscribe",r.slice(0,n).concat(r.slice(n+1)))}else e.$set(e.userInfo,"subscribe",t)}}}),r("label",{attrs:{for:"subscribe"}},[e._v("Go! Where? 最新商品情報")])]),r("li",{staticClass:"btnBar"},[r("button",{staticClass:"cancel",on:{click:e.reset}},[e._v("取消")]),r("button",{on:{click:function(s){return s.preventDefault(),e.setNewPassword(s)}}},[e._v("儲存變更")])])])])},t=[],i=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),n=r("59ca"),o=r.n(n);function d(e,s){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);s&&(a=a.filter((function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),r.push.apply(r,a)}return r}function u(e){for(var s=1;s<arguments.length;s++){var r=null!=arguments[s]?arguments[s]:{};s%2?d(r,!0).forEach((function(s){Object(i["a"])(e,s,r[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(r).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))}))}return e}var c=o.a.auth(),l={name:"accountInfo",data:function(){return{isEditing:{password:!1},intervalID:"",btnTime:30,userInfo:{},password:{}}},mounted:function(){var e=this;this.axios.get("".concat("https://go-where-shop.herokuapp.com","/api/user")).then((function(s){e.userInfo=s.data.userInfo}))},methods:{sendEmailVerificationAgain:function(){var e=this;c.currentUser.emailVerified||(e.$store.commit("LOADINGCHANGE",!0),c.currentUser.sendEmailVerification().then((function(){e.$store.commit("LOADINGCHANGE",!1),e.intervalID=setInterval((function(){e.btnTime>0?e.btnTime-=1:(clearInterval(e.intervalID),e.btnTime=30)}),1e3)})).catch((function(s){e.$store.dispatch("updateMessage",{message:s.message,status:"danger"}),e.$store.commit("LOADINGCHANGE",!1)})))},reset:function(){this.newUserInfo={},this.isEditing={password:!1}},setNewPassword:function(){var e=this;this.$store.commit("LOADINGCHANGE",!0);var s="".concat("https://go-where-shop.herokuapp.com","/api/user"),r=this.isEditing.password?u({},this.password,{},this.userInfo):u({},this.userInfo);this.$validator.validateAll().then((function(a){a&&e.axios.put(s,r).then((function(s){s.data.success?(e.reset(),e.$store.dispatch("updateMessage",{message:s.data.message,status:"success"})):e.$store.dispatch("updateMessage",{message:s.data.message,status:"danger"}),e.$store.commit("LOADINGCHANGE",!1)}))}))}},computed:{emailBtnDisable:function(){return!!this.$store.state.user.emailVerified||30!==this.btnTime},storeUser:function(){return this.$store.state.user}}},p=l,m=r("2877"),f=Object(m["a"])(p,a,t,!1,null,null,null);s["default"]=f.exports}}]);
//# sourceMappingURL=chunk-2d21ef69.4d87a790.js.map